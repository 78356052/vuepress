(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{189:function(e,n,t){"use strict";t.r(n);var r=t(0),s=Object(r.a)({},function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"k8s-node节点搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s-node节点搭建","aria-hidden":"true"}},[e._v("#")]),e._v(" k8s node节点搭建")]),e._v(" "),t("h2",{attrs:{id:"_1-下载并解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载并解压","aria-hidden":"true"}},[e._v("#")]),e._v(" 1.下载并解压")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wget https://dl.k8s.io/v1.15.1/kubernetes-node-linux-amd64.tar.gz\ntar -zxvf kubernetes-node-linux-amd64.tar.gz\n")])])]),t("h2",{attrs:{id:"_2-把相关命令拷贝到环境变量目录下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-把相关命令拷贝到环境变量目录下","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.把相关命令拷贝到环境变量目录下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cp kubelet kube-proxy /usr/bin/\n")])])]),t("h2",{attrs:{id:"_3-安装kubelet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装kubelet","aria-hidden":"true"}},[e._v("#")]),e._v(" 3.安装kubelet")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('vi /usr/lib/systemd/system/kubelet.service\n\n[Unit]\nDescription=Kubernetes Kubelet\nAfter=docker.service\nRequires=docker.service\n[Service]\nWorkingDirectory=/var/lib/kubelet\nEnvironmentFile=-/usr/local/k8s/conf/kubelet\nExecStart=/usr/bin/kubelet \\\n${KUBE_LOGTOSTDERR} \\\n${KUBE_LOG_LEVEL} \\\n${NODE_ADDRESS} \\\n${NODE_PORT} \\\n${NODE_HOSTNAME} \\\n${KUBELET_KUBECONFIG} \\\n${KUBELET_DNS_IP} \\\n${KUBELET_DNS_DOMAIN} \\\n${KUBELET_SWAP} \\\n${KUBELET_LOG_DIR}\nRestart=on-failure\nKillMode=process\n[Install]\nWantedBy=multi-user.target\n\nvi /usr/local/k8s/conf/kubelet\n\n#启用日志标准错误\nKUBE_LOGTOSTDERR="--logtostderr=true"\n#日志级别\nKUBE_LOG_LEVEL="--v=4"\n#Kubelet服务IP地址（自身IP）\nNODE_ADDRESS="--address=192.168.245.21"\n#Kubelet服务端口\nNODE_PORT="--port=10250"\n#自定义节点名称（自身IP）\nNODE_HOSTNAME="--hostname-override=node1"\n#kubeconfig路径，指定连接API服务器\nKUBELET_KUBECONFIG="--kubeconfig=/usr/local/k8s/conf/kubelet.kubeconfig"\n#允许容器请求特权模式，默认false\nKUBE_ALLOW_PRIV="--allow-privileged=false"\n#DNS信息，跟上面给的地址段对应\nKUBELET_DNS_IP="--cluster-dns=10.0.0.2"\nKUBELET_DNS_DOMAIN="--cluster-domain=cluster.local"\n#禁用使用Swap\nKUBELET_SWAP="--fail-swap-on=false"\n\nvi /usr/local/k8s/conf/kubelet.kubeconfig\n\napiVersion: v1\nkind: Config\nclusters:\n  - cluster:\n\t  server: http://192.168.245.20:8080\n    name: local\ncontexts:\n  - context:\n\t  cluster: local\n    name: local\ncurrent-context: local\n\nsystemctl enable kubelet  #加入开机自动启动\nsystemctl start kubelet  #启动服务\n')])])]),t("h2",{attrs:{id:"_4-安装kube-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装kube-proxy","aria-hidden":"true"}},[e._v("#")]),e._v(" 4.安装kube-proxy")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('vi /usr/lib/systemd/system/kube-proxy.service\n\n[Unit]\nDescription=Kubernetes Proxy\nAfter=network.target\n[Service]\nEnvironmentFile=-/usr/local/k8s/conf/kube-proxy\nExecStart=/usr/bin/kube-proxy \\\n${KUBE_LOGTOSTDERR} \\\n${KUBE_LOG_LEVEL} \\\n${NODE_HOSTNAME} \\\n${KUBE_MASTER}\nRestart=on-failure\n[Install]\nWantedBy=multi-user.target\n\nvi /usr/local/k8s/conf/kube-proxy\n\n#启用日志标准错误\nKUBE_LOGTOSTDERR="--logtostderr=true"\n#日志级别\nKUBE_LOG_LEVEL="--v=4"\n#自定义节点名称（自身IP）\nNODE_HOSTNAME="--hostname-override=192.168.245.21"\n#API服务地址（MasterIP）\nKUBE_MASTER="--master=http://192.168.245.20:8080"\n\nsystemctl enable kube-proxy  #加入开机自动启动\nsystemctl start kube-proxy  #启动服务\n')])])])])},[],!1,null,null,null);n.default=s.exports}}]);